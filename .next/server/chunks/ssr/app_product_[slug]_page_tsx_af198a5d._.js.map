{"version":3,"sources":["../../../../app/product/%5Bslug%5D/page.tsx","../../../../components/ui/card.tsx","../../../../components/ui/button.tsx","../../../../node_modules/.pnpm/class-variance-authority%400.7.1/node_modules/class-variance-authority/dist/index.mjs","../../../../components/product-card.tsx","../../../../components/ui/textarea.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useState, useEffect } from \"react\"\r\nimport { notFound } from \"next/navigation\"\r\nimport Image from \"next/image\"\r\nimport Link from \"next/link\"\r\nimport { motion } from \"framer-motion\"\r\nimport { \r\n  ArrowLeft, \r\n  Heart, \r\n  Share2, \r\n  Star, \r\n  Plus, \r\n  Minus,\r\n  ShoppingCart,\r\n  Truck,\r\n  Shield,\r\n  Clock,\r\n  Gift,\r\n  MessageCircle,\r\n  Phone\r\n} from \"lucide-react\"\r\n\r\nimport { HeaderSection } from \"@/components/header\"\r\nimport { FooterSection } from \"@/components/footer\"\r\nimport { ProductCard } from \"@/components/product-card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { useCart } from \"@/lib/cart-context\"\r\nimport { useCartSheet } from \"@/contexts/cart-sheet-context\"\r\nimport { convertApiProductToLibProduct } from \"@/lib/product-adapter\"\r\nimport { getSafeImageSrc, getSafeAltText } from \"@/lib/image-utils\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { CONTACT } from \"@/lib/constants\"\r\nimport { \r\n  staggerContainer, \r\n  staggerItem, \r\n  fadeInUp, \r\n  premiumEase \r\n} from \"@/components/animations/framer-variants\"\r\nimport { Product } from \"@/api/api.type\"\r\nimport { FirebaseApi } from \"@/api/firebase\"\r\n\r\n// Additional services options\r\nconst additionalServices = [\r\n  { id: \"gift-wrap\", name: \"Gói quà cao cấp\", price: 50000 },\r\n  { id: \"card\", name: \"Thiệp chúc mừng\", price: 20000 },\r\n  { id: \"delivery-express\", name: \"Giao hàng nhanh (2h)\", price: 100000 },\r\n  { id: \"setup\", name: \"Trang trí tại chỗ\", price: 200000 },\r\n]\r\n\r\ninterface ProductDetailPageProps {\r\n  params: Promise<{\r\n    slug: string\r\n  }>\r\n}\r\n\r\nexport default function ProductDetailPage({ params }: ProductDetailPageProps) {\r\n  const { slug } = React.use(params)\r\n  \r\n  const { addToCart } = useCart()\r\n  const { openCart } = useCartSheet()\r\n  \r\n  // API state\r\n  const [product, setProduct] = useState<Product | null>(null)\r\n  const [relatedProducts, setRelatedProducts] = useState<Product[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  \r\n  const [selectedImage, setSelectedImage] = useState(0)\r\n  const [quantity, setQuantity] = useState(1)\r\n  const [selectedServices, setSelectedServices] = useState<string[]>([])\r\n  const [note, setNote] = useState(\"\")\r\n  const [isAddingToCart, setIsAddingToCart] = useState(false)\r\n  const [isWishlisted, setIsWishlisted] = useState(false)\r\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false)\r\n\r\n  // Fetch product data from API\r\n  useEffect(() => {\r\n    const fetchProductData = async () => {\r\n      try {\r\n        // Fetch main product\r\n        const productRes = await FirebaseApi.getProductBySlug(slug)\r\n        console.log(\"Product API response:\", productRes)\r\n        \r\n        if (productRes.ok && productRes.data) {\r\n          setProduct(productRes.data)\r\n          \r\n          // Fetch all products for related products\r\n          const allProductsRes = await FirebaseApi.getProduct()\r\n          if (allProductsRes.ok && Array.isArray(allProductsRes.data)) {\r\n            // Filter related products (same category, excluding current product, only active)\r\n            const related = allProductsRes.data\r\n              .filter((p: Product) => \r\n                p.isActive && \r\n                p.id !== productRes.data.id &&\r\n                p.categoryIds?.some(catId => productRes.data.categoryIds?.includes(catId))\r\n              )\r\n              .slice(0, 4)\r\n            setRelatedProducts(related)\r\n          }\r\n        } else {\r\n          // Product not found\r\n          notFound()\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching product:\", error)\r\n        notFound()\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchProductData()\r\n  }, [slug])\r\n\r\n  // Set document title\r\n  useEffect(() => {\r\n    if (product?.name) {\r\n      document.title = `${product.name} - Hoa Tươi Đà Nẵng`\r\n    }\r\n  }, [product?.name])\r\n\r\n  // Keyboard navigation for images\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (!product?.images || product.images.length <= 1) return\r\n      \r\n      if (e.key === 'ArrowLeft') {\r\n        e.preventDefault()\r\n        setSelectedImage(selectedImage === 0 ? product.images.length - 1 : selectedImage - 1)\r\n      } else if (e.key === 'ArrowRight') {\r\n        e.preventDefault()\r\n        setSelectedImage(selectedImage === product.images.length - 1 ? 0 : selectedImage + 1)\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    return () => window.removeEventListener('keydown', handleKeyDown)\r\n  }, [selectedImage, product?.images])\r\n\r\n  // Show loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-white\">\r\n        <HeaderSection />\r\n        <main className=\"pt-24 pb-16\">\r\n          <div className=\"mx-auto max-w-[1240px] px-4 lg:px-8\">\r\n            <div className=\"grid lg:grid-cols-2 gap-12 lg:gap-16\">\r\n              {/* Image skeleton */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"aspect-square bg-gray-200 rounded-xl animate-pulse\" />\r\n                <div className=\"grid grid-cols-4 gap-3\">\r\n                  {[...Array(4)].map((_, i) => (\r\n                    <div key={i} className=\"aspect-square bg-gray-200 rounded-lg animate-pulse\" />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              {/* Content skeleton */}\r\n              <div className=\"space-y-6\">\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"h-8 bg-gray-200 rounded animate-pulse\" />\r\n                  <div className=\"h-6 bg-gray-200 rounded w-3/4 animate-pulse\" />\r\n                  <div className=\"h-8 bg-gray-200 rounded w-1/2 animate-pulse\" />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"h-4 bg-gray-200 rounded animate-pulse\" />\r\n                  <div className=\"h-4 bg-gray-200 rounded w-5/6 animate-pulse\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!product) {\r\n    notFound()\r\n  }\r\n\r\n  // Calculate total price including services\r\n  const basePrice = product.price || 0\r\n\r\n  const servicesTotal = selectedServices.reduce((total, serviceId) => {\r\n    const service = additionalServices.find(s => s.id === serviceId)\r\n    return total + (service?.price || 0)\r\n  }, 0)\r\n\r\n  const totalPrice = (basePrice + servicesTotal) * quantity\r\n\r\n  // Handle add to cart\r\n  const handleAddToCart = async () => {\r\n    setIsAddingToCart(true)\r\n    \r\n    try {\r\n      // Convert API product to lib product format for cart\r\n      const cartProduct = convertApiProductToLibProduct(product)\r\n      addToCart(cartProduct, quantity, selectedServices, note)\r\n      \r\n      // Show success feedback\r\n      setShowSuccessMessage(true)\r\n      setTimeout(() => {\r\n        setIsAddingToCart(false)\r\n        setShowSuccessMessage(false)\r\n        openCart()\r\n      }, 1000)\r\n    } catch (error) {\r\n      console.error('Error adding to cart:', error)\r\n      setIsAddingToCart(false)\r\n    }\r\n  }\r\n\r\n  // Handle service selection\r\n  const toggleService = (serviceId: string) => {\r\n    setSelectedServices(prev => \r\n      prev.includes(serviceId) \r\n        ? prev.filter(id => id !== serviceId)\r\n        : [...prev, serviceId]\r\n    )\r\n  }\r\n\r\n  \r\n  return (\r\n    <div className=\"min-h-screen bg-white\">\r\n      <HeaderSection />\r\n      \r\n      <main className=\"pt-24 pb-16\">\r\n        <div className=\"mx-auto max-w-[1240px] px-4 lg:px-8\">\r\n          {/* Breadcrumb */}\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.6, ease: premiumEase }}\r\n            className=\"flex items-center gap-2 mb-8\"\r\n          >\r\n            <Link \r\n              href=\"/\" \r\n              className=\"text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors\"\r\n            >\r\n              Trang chủ\r\n            </Link>\r\n            <span className=\"text-[var(--text-muted)]\">/</span>\r\n            <Link \r\n              href=\"/collection\" \r\n              className=\"text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors\"\r\n            >\r\n              Bộ sưu tập\r\n            </Link>\r\n            <span className=\"text-[var(--text-muted)]\">/</span>\r\n            <span className=\"text-[var(--text-primary)]\">{product.name}</span>\r\n          </motion.div>\r\n\r\n          {/* Product Detail */}\r\n          <div className=\"grid lg:grid-cols-2 gap-12 lg:gap-16 mb-16\">\r\n            {/* Product Images */}\r\n            <motion.div\r\n              initial={{ opacity: 0, x: -30 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ duration: 0.7, ease: premiumEase }}\r\n              className=\"space-y-4 group\"\r\n            >\r\n              {/* Main Image */}\r\n              <div className=\"relative aspect-square overflow-hidden rounded-xl bg-[var(--background-muted)]\">\r\n                <Image\r\n                  src={getSafeImageSrc(product.images?.[selectedImage], \"/placeholder.svg?height=600&width=600\")}\r\n                  alt={getSafeAltText(product.name, \"Sản phẩm\")}\r\n                  fill\r\n                  className=\"object-cover\"\r\n                  priority\r\n                />\r\n                \r\n                {/* Navigation Arrows - only show if more than 1 image */}\r\n                {product.images && product.images.length > 1 && (\r\n                  <>\r\n                    {/* Previous Image */}\r\n                    <button\r\n                      onClick={() => setSelectedImage(selectedImage === 0 ? product.images!.length - 1 : selectedImage - 1)}\r\n                      className=\"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--primary)] transition-all duration-300 opacity-0 hover:opacity-100 group-hover:opacity-100\"\r\n                    >\r\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                      </svg>\r\n                    </button>\r\n                    \r\n                    {/* Next Image */}\r\n                    <button\r\n                      onClick={() => setSelectedImage(selectedImage === product.images!.length - 1 ? 0 : selectedImage + 1)}\r\n                      className=\"absolute right-16 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--primary)] transition-all duration-300 opacity-0 hover:opacity-100 group-hover:opacity-100\"\r\n                    >\r\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                      </svg>\r\n                    </button>\r\n                  </>\r\n                )}\r\n                \r\n                {/* Image Counter */}\r\n                {product.images && product.images.length > 1 && (\r\n                  <div className=\"absolute bottom-4 left-4 bg-black/50 text-white text-sm px-3 py-1 rounded-full\">\r\n                    {selectedImage + 1} / {product.images.length}\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Wishlist Button */}\r\n                <button\r\n                  onClick={() => setIsWishlisted(!isWishlisted)}\r\n                  className={cn(\r\n                    \"absolute top-4 right-4 w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300\",\r\n                    isWishlisted \r\n                      ? \"bg-red-500 text-white\" \r\n                      : \"bg-white/90 backdrop-blur-sm text-[var(--text-secondary)] hover:text-red-500\"\r\n                  )}\r\n                >\r\n                  <Heart className={cn(\"w-5 h-5\", isWishlisted && \"fill-current\")} strokeWidth={1.5} />\r\n                </button>\r\n\r\n                {/* Share Button */}\r\n                <button className=\"absolute top-16 right-4 w-12 h-12 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors\">\r\n                  <Share2 className=\"w-5 h-5\" strokeWidth={1.5} />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Thumbnail Images */}\r\n              {product.images && product.images.length > 1 && (\r\n                <div className={cn(\r\n                  \"grid gap-3\",\r\n                  product.images.length <= 4 \r\n                    ? \"grid-cols-4\" \r\n                    : product.images.length <= 6 \r\n                    ? \"grid-cols-3\" \r\n                    : \"grid-cols-2\"\r\n                )}>\r\n                  {product.images.map((image, index) => (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => setSelectedImage(index)}\r\n                      className={cn(\r\n                        \"relative aspect-square overflow-hidden rounded-lg border-2 transition-all duration-300\",\r\n                        selectedImage === index \r\n                          ? \"border-[var(--primary)] shadow-lg\" \r\n                          : \"border-[var(--border-soft)] hover:border-[var(--primary)]/50\"\r\n                      )}\r\n                    >\r\n                      <Image\r\n                        src={getSafeImageSrc(image, \"/placeholder.svg?height=150&width=150\")}\r\n                        alt={`${product.name} - Ảnh ${index + 1}`}\r\n                        fill\r\n                        className=\"object-cover\"\r\n                      />\r\n                      {/* Image counter for better UX */}\r\n                      <div className=\"absolute bottom-1 right-1 bg-black/50 text-white text-xs px-1.5 py-0.5 rounded\">\r\n                        {index + 1}\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </motion.div>\r\n\r\n            {/* Product Info */}\r\n            <motion.div\r\n              initial={{ opacity: 0, x: 30 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ duration: 0.7, ease: premiumEase }}\r\n              className=\"space-y-6\"\r\n            >\r\n              {/* Product Title & Rating */}\r\n              <div>\r\n                <h1 className=\"font-display text-3xl lg:text-4xl font-semibold text-[var(--text-primary)] mb-3\">\r\n                  {product.name}\r\n                </h1>\r\n                \r\n                <div className=\"flex items-center gap-4 mb-4\">\r\n                  <div className=\"flex items-center gap-1\">\r\n                    {Array.from({ length: 5 }).map((_, i) => (\r\n                      <Star \r\n                        key={i} \r\n                        className={cn(\r\n                          \"w-5 h-5\",\r\n                          i < Math.floor(product.rating || 4) \r\n                            ? \"fill-yellow-400 text-yellow-400\" \r\n                            : \"text-gray-300\"\r\n                        )} \r\n                        strokeWidth={1.5} \r\n                      />\r\n                    ))}\r\n                    <span className=\"text-sm text-[var(--text-muted)] ml-2\">\r\n                      ({product.rating || 4.9} • {product.sold || 127} đã bán)\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                  <span className=\"font-display text-3xl font-bold text-[var(--primary)]\">\r\n                    {product.price.toLocaleString(\"vi-VN\")}đ\r\n                  </span>\r\n                  <span className=\"px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full\">\r\n                    {product.badge || \"Còn hàng\"}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Product Description */}\r\n              <div className=\"prose prose-sm max-w-none\">\r\n                <p className=\"text-[var(--text-secondary)] leading-relaxed\">\r\n                  {product.description}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Quantity Selector */}\r\n              <div className=\"space-y-3\">\r\n                <label className=\"font-medium text-[var(--text-primary)]\">Số lượng:</label>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <button\r\n                    onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                    className=\"w-12 h-12 flex items-center justify-center rounded-full border border-[var(--border-soft)] hover:bg-[var(--background-muted)] transition-colors\"\r\n                  >\r\n                    <Minus className=\"w-5 h-5\" strokeWidth={2} />\r\n                  </button>\r\n                  <span className=\"w-16 text-center font-semibold text-xl\">\r\n                    {quantity}\r\n                  </span>\r\n                  <button\r\n                    onClick={() => setQuantity(quantity + 1)}\r\n                    className=\"w-12 h-12 flex items-center justify-center rounded-full border border-[var(--border-soft)] hover:bg-[var(--background-muted)] transition-colors\"\r\n                  >\r\n                    <Plus className=\"w-5 h-5\" strokeWidth={2} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Additional Services */}\r\n              <div className=\"space-y-4\">\r\n                <label className=\"font-medium text-[var(--text-primary)]\">Dịch vụ thêm:</label>\r\n                <div className=\"space-y-3\">\r\n                  {additionalServices.map((service) => (\r\n                    <div key={service.id} className=\"flex items-center justify-between p-3 border border-[var(--border-soft)] rounded-lg\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <Checkbox\r\n                          id={service.id}\r\n                          checked={selectedServices.includes(service.id)}\r\n                          onCheckedChange={() => toggleService(service.id)}\r\n                        />\r\n                        <label htmlFor={service.id} className=\"font-medium cursor-pointer\">\r\n                          {service.name}\r\n                        </label>\r\n                      </div>\r\n                      <span className=\"font-semibold text-[var(--primary)]\">\r\n                        +{service.price.toLocaleString()}đ\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Special Note */}\r\n              <div className=\"space-y-3\">\r\n                <label htmlFor=\"note\" className=\"font-medium text-[var(--text-primary)]\">\r\n                  Ghi chú đặc biệt:\r\n                </label>\r\n                <Textarea\r\n                  id=\"note\"\r\n                  value={note}\r\n                  onChange={(e) => setNote(e.target.value)}\r\n                  placeholder=\"Ví dụ: Giao trước 10h sáng, thiệp ghi 'Chúc mừng sinh nhật'...\"\r\n                  className=\"min-h-[100px]\"\r\n                />\r\n              </div>\r\n\r\n              {/* Total Price */}\r\n              {(servicesTotal > 0 || quantity > 1) && (\r\n                <div className=\"p-4 bg-[var(--background-muted)] rounded-xl\">\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex justify-between text-sm\">\r\n                      <span>Sản phẩm ({quantity}x)</span>\r\n                      <span>{(basePrice * quantity).toLocaleString()}đ</span>\r\n                    </div>\r\n                    {servicesTotal > 0 && (\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <span>Dịch vụ thêm</span>\r\n                        <span>{servicesTotal.toLocaleString()}đ</span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"border-t border-[var(--border-soft)] pt-2 flex justify-between font-semibold\">\r\n                      <span>Tổng cộng:</span>\r\n                      <span className=\"text-[var(--primary)] text-lg\">\r\n                        {totalPrice.toLocaleString()}đ\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"space-y-3\">\r\n                <Button\r\n                  onClick={handleAddToCart}\r\n                  disabled={isAddingToCart || basePrice === 0}\r\n                  className={cn(\r\n                    \"w-full h-14 text-lg font-semibold transition-all duration-300\",\r\n                    showSuccessMessage && \"bg-green-500 hover:bg-green-600\"\r\n                  )}\r\n                  size=\"lg\"\r\n                >\r\n                  {showSuccessMessage ? (\r\n                    <>\r\n                      <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\r\n                      Đã thêm vào giỏ hàng!\r\n                    </>\r\n                  ) : isAddingToCart ? (\r\n                    <>\r\n                      <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2\" />\r\n                      Đang thêm...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <ShoppingCart className=\"w-5 h-5 mr-2\" strokeWidth={1.5} />\r\n                      Thêm vào giỏ hàng\r\n                    </>\r\n                  )}\r\n                </Button>\r\n\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <Button variant=\"outline\" size=\"lg\" asChild>\r\n                    <a href={CONTACT.zaloLink} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                      <MessageCircle className=\"w-5 h-5 mr-2\" strokeWidth={1.5} />\r\n                      Chat Zalo\r\n                    </a>\r\n                  </Button>\r\n                  <Button variant=\"outline\" size=\"lg\" asChild>\r\n                    <a href={CONTACT.phoneLink}>\r\n                      <Phone className=\"w-5 h-5 mr-2\" strokeWidth={1.5} />\r\n                      Gọi ngay\r\n                    </a>\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Trust Badges */}\r\n              <div className=\"grid grid-cols-3 gap-4 pt-6 border-t border-[var(--border-soft)]\">\r\n                {[\r\n                  { icon: Truck, text: \"Giao hàng nhanh\" },\r\n                  { icon: Shield, text: \"Hoa tươi 100%\" },\r\n                  { icon: Clock, text: \"Hỗ trợ 24/7\" }\r\n                ].map((badge, index) => (\r\n                  <div key={index} className=\"flex flex-col items-center text-center\">\r\n                    <div className=\"w-12 h-12 bg-[var(--primary)]/10 rounded-full flex items-center justify-center mb-2\">\r\n                      <badge.icon className=\"w-6 h-6 text-[var(--primary)]\" strokeWidth={1.5} />\r\n                    </div>\r\n                    <span className=\"text-sm font-medium text-[var(--text-secondary)]\">\r\n                      {badge.text}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n\r\n          {/* Related Products */}\r\n          {relatedProducts.length > 0 && (\r\n            <motion.section\r\n              initial=\"initial\"\r\n              animate=\"animate\"\r\n              variants={staggerContainer}\r\n              className=\"space-y-8\"\r\n            >\r\n              <motion.div variants={staggerItem} className=\"text-center\">\r\n                <h2 className=\"font-display text-2xl lg:text-3xl font-semibold text-[var(--text-primary)] mb-4\">\r\n                  Sản phẩm liên quan\r\n                </h2>\r\n                <p className=\"text-[var(--text-secondary)] max-w-2xl mx-auto\">\r\n                  Khám phá thêm những sản phẩm tương tự trong cùng danh mục\r\n                </p>\r\n              </motion.div>\r\n\r\n              <motion.div \r\n                variants={staggerItem}\r\n                className=\"grid grid-cols-2 md:grid-cols-4 gap-6\"\r\n              >\r\n                {relatedProducts.map((relatedProduct) => (\r\n                  <ProductCard\r\n                    key={relatedProduct.id}\r\n                    id={relatedProduct.id}\r\n                    name={relatedProduct.name}\r\n                    price={`${relatedProduct.price.toLocaleString(\"vi-VN\")}đ`}\r\n                    image={relatedProduct.images?.[0] || \"/placeholder.svg?height=400&width=400\"}\r\n                    slug={relatedProduct.slug}\r\n                  />\r\n                ))}\r\n              </motion.div>\r\n            </motion.section>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      <FooterSection />\r\n    </div>\r\n  )\r\n}","import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n","/**\n * Copyright 2022 Joe Bell. All rights reserved.\n *\n * This file is licensed to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with the\n * License. You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR REPRESENTATIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */ import { clsx } from \"clsx\";\nconst falsyToString = (value)=>typeof value === \"boolean\" ? `${value}` : value === 0 ? \"0\" : value;\nexport const cx = clsx;\nexport const cva = (base, config)=>(props)=>{\n        var _config_compoundVariants;\n        if ((config === null || config === void 0 ? void 0 : config.variants) == null) return cx(base, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n        const { variants, defaultVariants } = config;\n        const getVariantClassNames = Object.keys(variants).map((variant)=>{\n            const variantProp = props === null || props === void 0 ? void 0 : props[variant];\n            const defaultVariantProp = defaultVariants === null || defaultVariants === void 0 ? void 0 : defaultVariants[variant];\n            if (variantProp === null) return null;\n            const variantKey = falsyToString(variantProp) || falsyToString(defaultVariantProp);\n            return variants[variant][variantKey];\n        });\n        const propsWithoutUndefined = props && Object.entries(props).reduce((acc, param)=>{\n            let [key, value] = param;\n            if (value === undefined) {\n                return acc;\n            }\n            acc[key] = value;\n            return acc;\n        }, {});\n        const getCompoundVariantClassNames = config === null || config === void 0 ? void 0 : (_config_compoundVariants = config.compoundVariants) === null || _config_compoundVariants === void 0 ? void 0 : _config_compoundVariants.reduce((acc, param)=>{\n            let { class: cvClass, className: cvClassName, ...compoundVariantOptions } = param;\n            return Object.entries(compoundVariantOptions).every((param)=>{\n                let [key, value] = param;\n                return Array.isArray(value) ? value.includes({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                }[key]) : ({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                })[key] === value;\n            }) ? [\n                ...acc,\n                cvClass,\n                cvClassName\n            ] : acc;\n        }, []);\n        return cx(base, getVariantClassNames, getCompoundVariantClassNames, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n    };\n\n","import Image from \"next/image\"\nimport Link from \"next/link\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { getSafeImageSrc, getSafeAltText } from \"@/lib/image-utils\"\n\ninterface ProductCardProps {\n  id: string\n  name: string\n  price: string\n  image: string\n  slug: string\n}\n\nexport function ProductCard({ name, price, image, slug }: ProductCardProps) {\n  return (\n    <Link href={`/product/${slug}`}>\n      <Card className=\"group border-0 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden bg-card\">\n        <CardContent className=\"p-0\">\n          <div className=\"relative aspect-square overflow-hidden\">\n            <Image\n              src={getSafeImageSrc(image, \"/placeholder.svg\")}\n              alt={getSafeAltText(name, \"Sản phẩm\")}\n              fill\n              className=\"object-cover group-hover:scale-105 transition-transform duration-500\"\n            />\n          </div>\n          <div className=\"p-4\">\n            <h3 className=\"font-medium text-foreground text-base mb-2 line-clamp-2 min-h-[3rem]\">{name}</h3>\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-primary font-semibold\">{price}</p>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"text-xs border-primary text-primary hover:bg-primary hover:text-primary-foreground bg-transparent\"\n              >\n                Xem chi tiết\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </Link>\n  )\n}\n","import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":"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","ignoreList":[3]}