module.exports=[9544,a=>{"use strict";let b,c;var d=a.i(7597),e=a.i(98730),f=a.i(18988),g=a.i(73965),h=a.i(98394),i=a.i(74166),j=a.i(35573),k=a.i(4328),l=a.i(47878),m=a.i(84980),n=a.i(51653),o=a.i(75663),p=a.i(26333),q=a.i(90542),r=a.i(76929),s=a.i(84247),t=a.i(75407),u=a.i(70382),v=a.i(28887),w=a.i(97895);function x({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card",className:(0,w.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...b})}function y({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-content",className:(0,w.cn)("px-6",a),...b})}var z=a.i(57554),A=a.i(39337);let B=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,C=A.clsx,D=(b="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",c={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}},a=>{var d;if((null==c?void 0:c.variants)==null)return C(b,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:e,defaultVariants:f}=c,g=Object.keys(e).map(b=>{let c=null==a?void 0:a[b],d=null==f?void 0:f[b];if(null===c)return null;let g=B(c)||B(d);return e[b][g]}),h=a&&Object.entries(a).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return C(b,g,null==c||null==(d=c.compoundVariants)?void 0:d.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...h}[b]):({...f,...h})[b]===c})?[...a,c,d]:a},[]),null==a?void 0:a.class,null==a?void 0:a.className)});function E({className:a,variant:b,size:c,asChild:e=!1,...f}){let g=e?z.Slot:"button";return(0,d.jsx)(g,{"data-slot":"button",className:(0,w.cn)(D({variant:b,size:c,className:a})),...f})}var F=a.i(98687);function G({name:a,price:b,image:c,slug:e}){return(0,d.jsx)(h.default,{href:`/product/${e}`,children:(0,d.jsx)(x,{className:"group border-0 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden bg-card",children:(0,d.jsxs)(y,{className:"p-0",children:[(0,d.jsx)("div",{className:"relative aspect-square overflow-hidden",children:(0,d.jsx)(g.default,{src:(0,F.getSafeImageSrc)(c,"/placeholder.svg"),alt:(0,F.getSafeAltText)(a,"Sản phẩm"),fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-500"})}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)("h3",{className:"font-medium text-foreground text-base mb-2 line-clamp-2 min-h-[3rem]",children:a}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("p",{className:"text-primary font-semibold",children:b}),(0,d.jsx)(E,{size:"sm",variant:"outline",className:"text-xs border-primary text-primary hover:bg-primary hover:text-primary-foreground bg-transparent",children:"Xem chi tiết"})]})]})]})})})}var H=a.i(46143);function I({className:a,...b}){return(0,d.jsx)("textarea",{"data-slot":"textarea",className:(0,w.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...b})}var J=a.i(91290),K=a.i(32330),L=a.i(64570),M=a.i(64600),N=a.i(21973),O=a.i(77799);let P=[{id:"gift-wrap",name:"Gói quà cao cấp",price:5e4},{id:"card",name:"Thiệp chúc mừng",price:2e4},{id:"delivery-express",name:"Giao hàng nhanh (2h)",price:1e5},{id:"setup",name:"Trang trí tại chỗ",price:2e5}];function Q({params:a}){let{slug:b}=e.default.use(a),{addToCart:c}=(0,J.useCart)(),{openCart:x}=(0,K.useCartSheet)(),[y,z]=(0,e.useState)(null),[A,B]=(0,e.useState)([]),[C,D]=(0,e.useState)(!0),[Q,R]=(0,e.useState)(0),[S,T]=(0,e.useState)(1),[U,V]=(0,e.useState)([]),[W,X]=(0,e.useState)(""),[Y,Z]=(0,e.useState)(!1),[$,_]=(0,e.useState)(!1),[aa,ab]=(0,e.useState)(!1);if((0,e.useEffect)(()=>{(async()=>{try{let a=await O.FirebaseApi.getProductBySlug(b);if(console.log("Product API response:",a),a.ok&&a.data){z(a.data);let b=await O.FirebaseApi.getProduct();if(b.ok&&Array.isArray(b.data)){let c=b.data.filter(b=>b.isActive&&b.id!==a.data.id&&b.categoryIds?.some(b=>a.data.categoryIds?.includes(b))).slice(0,4);B(c)}}else(0,f.notFound)()}catch(a){console.error("Error fetching product:",a),(0,f.notFound)()}finally{D(!1)}})()},[b]),(0,e.useEffect)(()=>{y?.name&&(document.title=`${y.name} - Hoa Tươi Đ\xe0 Nẵng`)},[y?.name]),(0,e.useEffect)(()=>{let a=a=>{y?.images&&!(y.images.length<=1)&&("ArrowLeft"===a.key?(a.preventDefault(),R(0===Q?y.images.length-1:Q-1)):"ArrowRight"===a.key&&(a.preventDefault(),R(Q===y.images.length-1?0:Q+1)))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[Q,y?.images]),C)return(0,d.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,d.jsx)(u.HeaderSection,{}),(0,d.jsx)("main",{className:"pt-24 pb-16",children:(0,d.jsx)("div",{className:"mx-auto max-w-[1240px] px-4 lg:px-8",children:(0,d.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("div",{className:"aspect-square bg-gray-200 rounded-xl animate-pulse"}),(0,d.jsx)("div",{className:"grid grid-cols-4 gap-3",children:[void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},b))})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,d.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 animate-pulse"}),(0,d.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 animate-pulse"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6 animate-pulse"})]})]})]})})})]});y||(0,f.notFound)();let ac=y.price||0,ad=U.reduce((a,b)=>{let c=P.find(a=>a.id===b);return a+(c?.price||0)},0),ae=(ac+ad)*S,af=async()=>{Z(!0);try{let a=(0,L.convertApiProductToLibProduct)(y);c(a,S,U,W),ab(!0),setTimeout(()=>{Z(!1),ab(!1),x()},1e3)}catch(a){console.error("Error adding to cart:",a),Z(!1)}};return(0,d.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,d.jsx)(u.HeaderSection,{}),(0,d.jsx)("main",{className:"pt-24 pb-16",children:(0,d.jsxs)("div",{className:"mx-auto max-w-[1240px] px-4 lg:px-8",children:[(0,d.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:N.premiumEase},className:"flex items-center gap-2 mb-8",children:[(0,d.jsx)(h.default,{href:"/",className:"text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors",children:"Trang chủ"}),(0,d.jsx)("span",{className:"text-[var(--text-muted)]",children:"/"}),(0,d.jsx)(h.default,{href:"/collection",className:"text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors",children:"Bộ sưu tập"}),(0,d.jsx)("span",{className:"text-[var(--text-muted)]",children:"/"}),(0,d.jsx)("span",{className:"text-[var(--text-primary)]",children:y.name})]}),(0,d.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 mb-16",children:[(0,d.jsxs)(i.motion.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.7,ease:N.premiumEase},className:"space-y-4 group",children:[(0,d.jsxs)("div",{className:"relative aspect-square overflow-hidden rounded-xl bg-[var(--background-muted)]",children:[(0,d.jsx)(g.default,{src:(0,F.getSafeImageSrc)(y.images?.[Q],"/placeholder.svg?height=600&width=600"),alt:(0,F.getSafeAltText)(y.name,"Sản phẩm"),fill:!0,className:"object-cover",priority:!0}),y.images&&y.images.length>1&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>R(0===Q?y.images.length-1:Q-1),className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--primary)] transition-all duration-300 opacity-0 hover:opacity-100 group-hover:opacity-100",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,d.jsx)("button",{onClick:()=>R(Q===y.images.length-1?0:Q+1),className:"absolute right-16 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--primary)] transition-all duration-300 opacity-0 hover:opacity-100 group-hover:opacity-100",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),y.images&&y.images.length>1&&(0,d.jsxs)("div",{className:"absolute bottom-4 left-4 bg-black/50 text-white text-sm px-3 py-1 rounded-full",children:[Q+1," / ",y.images.length]}),(0,d.jsx)("button",{onClick:()=>_(!$),className:(0,w.cn)("absolute top-4 right-4 w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300",$?"bg-red-500 text-white":"bg-white/90 backdrop-blur-sm text-[var(--text-secondary)] hover:text-red-500"),children:(0,d.jsx)(j.Heart,{className:(0,w.cn)("w-5 h-5",$&&"fill-current"),strokeWidth:1.5})}),(0,d.jsx)("button",{className:"absolute top-16 right-4 w-12 h-12 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--primary)] transition-colors",children:(0,d.jsx)(k.Share2,{className:"w-5 h-5",strokeWidth:1.5})})]}),y.images&&y.images.length>1&&(0,d.jsx)("div",{className:(0,w.cn)("grid gap-3",y.images.length<=4?"grid-cols-4":y.images.length<=6?"grid-cols-3":"grid-cols-2"),children:y.images.map((a,b)=>(0,d.jsx)("button",{onClick:()=>R(b),className:(0,w.cn)("relative aspect-square overflow-hidden rounded-lg border-2 transition-all duration-300",Q===b?"border-[var(--primary)] shadow-lg":"border-[var(--border-soft)] hover:border-[var(--primary)]/50"),children:(0,d.jsx)(g.default,{src:(0,F.getSafeImageSrc)(a,"/placeholder.svg?height=150&width=150"),alt:`${y.name} - Ảnh ${b+1}`,fill:!0,className:"object-cover"})},b))})]}),(0,d.jsxs)(i.motion.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.7,ease:N.premiumEase},className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"font-display text-3xl lg:text-4xl font-semibold text-[var(--text-primary)] mb-3",children:y.name}),(0,d.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[Array.from({length:5}).map((a,b)=>(0,d.jsx)(l.Star,{className:(0,w.cn)("w-5 h-5",b<Math.floor(y.rating||4)?"fill-yellow-400 text-yellow-400":"text-gray-300"),strokeWidth:1.5},b)),(0,d.jsxs)("span",{className:"text-sm text-[var(--text-muted)] ml-2",children:["(",y.rating||4.9," • ",y.sold||127," đã bán)"]})]})}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("span",{className:"font-display text-3xl font-bold text-[var(--primary)]",children:[y.price.toLocaleString("vi-VN"),"đ"]}),(0,d.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:y.badge||"Còn hàng"})]})]}),(0,d.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,d.jsx)("p",{className:"text-[var(--text-secondary)] leading-relaxed",children:y.description})}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("label",{className:"font-medium text-[var(--text-primary)]",children:"Số lượng:"}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("button",{onClick:()=>T(Math.max(1,S-1)),className:"w-12 h-12 flex items-center justify-center rounded-full border border-[var(--border-soft)] hover:bg-[var(--background-muted)] transition-colors",children:(0,d.jsx)(n.Minus,{className:"w-5 h-5",strokeWidth:2})}),(0,d.jsx)("span",{className:"w-16 text-center font-semibold text-xl",children:S}),(0,d.jsx)("button",{onClick:()=>T(S+1),className:"w-12 h-12 flex items-center justify-center rounded-full border border-[var(--border-soft)] hover:bg-[var(--background-muted)] transition-colors",children:(0,d.jsx)(m.Plus,{className:"w-5 h-5",strokeWidth:2})})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("label",{className:"font-medium text-[var(--text-primary)]",children:"Dịch vụ thêm:"}),(0,d.jsx)("div",{className:"space-y-3",children:P.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 border border-[var(--border-soft)] rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(H.Checkbox,{id:a.id,checked:U.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void V(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])}}),(0,d.jsx)("label",{htmlFor:a.id,className:"font-medium cursor-pointer",children:a.name})]}),(0,d.jsxs)("span",{className:"font-semibold text-[var(--primary)]",children:["+",a.price.toLocaleString(),"đ"]})]},a.id))})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("label",{htmlFor:"note",className:"font-medium text-[var(--text-primary)]",children:"Ghi chú đặc biệt:"}),(0,d.jsx)(I,{id:"note",value:W,onChange:a=>X(a.target.value),placeholder:"Ví dụ: Giao trước 10h sáng, thiệp ghi 'Chúc mừng sinh nhật'...",className:"min-h-[100px]"})]}),(ad>0||S>1)&&(0,d.jsx)("div",{className:"p-4 bg-[var(--background-muted)] rounded-xl",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsxs)("span",{children:["Sản phẩm (",S,"x)"]}),(0,d.jsxs)("span",{children:[(ac*S).toLocaleString(),"đ"]})]}),ad>0&&(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{children:"Dịch vụ thêm"}),(0,d.jsxs)("span",{children:[ad.toLocaleString(),"đ"]})]}),(0,d.jsxs)("div",{className:"border-t border-[var(--border-soft)] pt-2 flex justify-between font-semibold",children:[(0,d.jsx)("span",{children:"Tổng cộng:"}),(0,d.jsxs)("span",{className:"text-[var(--primary)] text-lg",children:[ae.toLocaleString(),"đ"]})]})]})}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(E,{onClick:af,disabled:Y||0===ac,className:(0,w.cn)("w-full h-14 text-lg font-semibold transition-all duration-300",aa&&"bg-green-500 hover:bg-green-600"),size:"lg",children:aa?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Đã thêm vào giỏ hàng!"]}):Y?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Đang thêm..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.ShoppingCart,{className:"w-5 h-5 mr-2",strokeWidth:1.5}),"Thêm vào giỏ hàng"]})}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsx)(E,{variant:"outline",size:"lg",asChild:!0,children:(0,d.jsxs)("a",{href:M.CONTACT.zaloLink,target:"_blank",rel:"noopener noreferrer",children:[(0,d.jsx)(s.MessageCircle,{className:"w-5 h-5 mr-2",strokeWidth:1.5}),"Chat Zalo"]})}),(0,d.jsx)(E,{variant:"outline",size:"lg",asChild:!0,children:(0,d.jsxs)("a",{href:M.CONTACT.phoneLink,children:[(0,d.jsx)(t.Phone,{className:"w-5 h-5 mr-2",strokeWidth:1.5}),"Gọi ngay"]})})]})]}),(0,d.jsx)("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-[var(--border-soft)]",children:[{icon:p.Truck,text:"Giao hàng nhanh"},{icon:q.Shield,text:"Hoa tươi 100%"},{icon:r.Clock,text:"Hỗ trợ 24/7"}].map((a,b)=>(0,d.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,d.jsx)("div",{className:"w-12 h-12 bg-[var(--primary)]/10 rounded-full flex items-center justify-center mb-2",children:(0,d.jsx)(a.icon,{className:"w-6 h-6 text-[var(--primary)]",strokeWidth:1.5})}),(0,d.jsx)("span",{className:"text-sm font-medium text-[var(--text-secondary)]",children:a.text})]},b))})]})]}),A.length>0&&(0,d.jsxs)(i.motion.section,{initial:"initial",animate:"animate",variants:N.staggerContainer,className:"space-y-8",children:[(0,d.jsxs)(i.motion.div,{variants:N.staggerItem,className:"text-center",children:[(0,d.jsx)("h2",{className:"font-display text-2xl lg:text-3xl font-semibold text-[var(--text-primary)] mb-4",children:"Sản phẩm liên quan"}),(0,d.jsx)("p",{className:"text-[var(--text-secondary)] max-w-2xl mx-auto",children:"Khám phá thêm những sản phẩm tương tự trong cùng danh mục"})]}),(0,d.jsx)(i.motion.div,{variants:N.staggerItem,className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:A.map(a=>(0,d.jsx)(G,{id:a.id,name:a.name,price:`${a.price.toLocaleString("vi-VN")}đ`,image:a.images?.[0]||"/placeholder.svg?height=400&width=400",slug:a.slug},a.id))})]})]})}),(0,d.jsx)(v.FooterSection,{})]})}a.s(["default",()=>Q],9544)}];

//# sourceMappingURL=app_product_%5Bslug%5D_page_tsx_af198a5d._.js.map